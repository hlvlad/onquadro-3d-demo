(this["webpackJsonpmolstar-demo"]=this["webpackJsonpmolstar-demo"]||[]).push([[0],{425:function(e,t,r){},426:function(e,t,r){},547:function(e,t,r){"use strict";r.r(t);var n=r(7),a=r.n(n),c=r(299),o=r.n(c),u=(r(425),r(315)),i=r(273),s=(r(426),r(316)),l=r.n(s),d=r(378),b=r(409),p=r(410),j=(r(428),r(75)),h=r(165),f=r(25),m=r(312),O=r(420),g=r(24),v=function(){function e(t){Object(b.a)(this,e),this.plugin=void 0,this.currentStructure=void 0;var r=Object(u.a)(Object(u.a)({},Object(m.a)()),{},{layout:{initial:{isExpanded:!1,showControls:!0,controlsDisplay:"reactive"}},components:{remoteState:"none"},config:[[j.a.Viewport.ShowExpand,!0],[j.a.Viewport.ShowAnimation,!1],[j.a.Viewport.ShowSelectionMode,!1]]});this.plugin=Object(O.a)(t,r)}return Object(p.a)(e,[{key:"loadStructureFromData",value:function(){var e=Object(d.a)(l.a.mark((function e(t,r,n){var a,c,o,u,i,s,d,b,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.plugin.clear();case 2:return console.log("Loading..."),this.plugin.behaviors.layout.leftPanelTabName.next("data"),e.next=6,this.plugin.builders.data.rawData({data:t});case 6:return a=e.sent,e.next=9,this.plugin.builders.structure.parseTrajectory(a,r);case 9:return c=e.sent,e.next=12,this.plugin.builders.structure.createModel(c);case 12:if(o=e.sent){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,this.plugin.builders.structure.createStructure(o);case 17:return u=e.sent,i=n.type,s=n.coloring,d=n.uniformColor,b={type:i,typeParams:{visuals:["nucleotide-block"]},color:s,size:"uniform",sizeParams:{value:2}},"uniform"===s&&(b.colorParams={value:g.a.fromRgb(d.r,d.g,d.b)}),p=Object(h.b)(this.plugin,u.data,b),e.next=24,this.plugin.build().to(u).apply(f.a.Representation.StructureRepresentation3D,p).commit();case 24:this.currentStructure=e.sent;case 25:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"updateMoleculeRepresentation",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var r,n,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.type,n=t.coloring,a=t.uniformColor,c={type:r,typeParams:{visuals:["nucleotide-block"]},color:n,size:"uniform",sizeParams:{value:2}},"uniform"===n&&(c.colorParams={value:g.a.fromRgb(a.r,a.g,a.b)}),o=Object(h.b)(this.plugin,this.currentStructure.data,c),console.log("Trying to update structure 3D Representation to ".concat(r)),e.next=7,this.plugin.build().to(this.currentStructure).update(o).commit();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e;null===(e=this.plugin)||void 0===e||e.dispose()}}]),e}(),x=(r(437),r(3)),y=function(e){var t=e.id,r=e.structure3d,a=e.structure3dRepresentation,c=e.structure3dColoring,o=e.uniformColor,u=Object(n.useRef)(null),s=Object(n.useState)(null),l=Object(i.a)(s,2),d=l[0],b=l[1];return Object(n.useEffect)((function(){if(null!==u.current){var e=new v(u.current);b(e)}}),[]),Object(n.useEffect)((function(){null!==d&&d.loadStructureFromData(r,"mmcif",{type:a,coloring:c,uniformColor:o})}),[r]),Object(n.useEffect)((function(){console.log("Updating view..."),null!==d&&d.updateMoleculeRepresentation({type:a,coloring:c,uniformColor:o})}),[a,c,o]),Object(x.jsx)("div",{id:t,children:Object(x.jsx)("div",{id:"viewer3d",ref:u})})},k=r(222),C=r(382),w=r(311),S=r(419);var R=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)("ball-and-stick"),o=Object(i.a)(c,2),s=o[0],l=o[1],d=Object(n.useState)("element-symbol"),b=Object(i.a)(d,2),p=b[0],j=b[1],h=Object(n.useState)({r:251,g:158,b:0}),f=Object(i.a)(h,2),m=f[0],O=f[1];function g(e){l(e.target.value)}function v(e){j(e.target.value)}Object(n.useEffect)((function(){fetch("data/5da6.cif").then((function(e){return e.text()})).then((function(e){a(e)})).catch((function(e){console.error(e)}))}),[]);var R={structure3d:r,structure3dRepresentation:s,structure3dColoring:p,uniformColor:m};return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("div",{id:"viewer3d-controls",children:Object(x.jsxs)(k.a,{children:[Object(x.jsx)("fieldset",{children:Object(x.jsxs)(k.a.Group,{as:C.a,children:[Object(x.jsx)(k.a.Label,{as:"legend",column:!0,sm:2,children:"3D structure appearance"}),Object(x.jsxs)(w.a,{sm:10,children:[Object(x.jsx)(k.a.Check,{type:"radio",label:"Ball and stick",checked:"ball-and-stick"===s,value:"ball-and-stick",onChange:g}),Object(x.jsx)(k.a.Check,{type:"radio",label:"Cartoon",checked:"cartoon"===s,value:"cartoon",onChange:g}),Object(x.jsx)(k.a.Check,{type:"radio",label:"Putty",checked:"putty"===s,value:"putty",onChange:g})]})]})}),Object(x.jsx)("fieldset",{children:Object(x.jsxs)(k.a.Group,{as:C.a,children:[Object(x.jsx)(k.a.Label,{as:"legend",column:!0,sm:2,children:"3D structure coloring"}),Object(x.jsxs)(w.a,{sm:10,children:[Object(x.jsx)(k.a.Check,{type:"radio",label:"Element symbol",checked:"element-symbol"===p,value:"element-symbol",onChange:v}),Object(x.jsx)(k.a.Check,{type:"radio",label:"Uniform",checked:"uniform"===p,value:"uniform",onChange:v}),"uniform"===p&&Object(x.jsx)(S.a,{color:m,onChange:function(e){return O(e.rgb)}})]})]})})]})}),Object(x.jsx)(y,Object(u.a)({id:"viewer3d-wrapper"},R))]})};o.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(R,{})}),document.getElementById("root"))}},[[547,1,2]]]);
//# sourceMappingURL=main.fbbedf7b.chunk.js.map